/* Rendered markdown preview styles */
.cm-markdown-preview {
  display: inline;
}

/* Headers using custom classes from markdown.js */
.cm-markdown-preview .md-header {
  display: inline;
  font-weight: 600;
  line-height: 1.4;
}

.cm-markdown-preview .md-h1 {
  font-size: 2em;
  color: #1a1a1a;
}

.cm-markdown-preview .md-h2 {
  font-size: 1.5em;
  color: #2a2a2a;
}

.cm-markdown-preview .md-h3 {
  font-size: 1.25em;
  color: #3a3a3a;
}

.cm-markdown-preview .md-h4 {
  font-size: 1.1em;
  color: #4a4a4a;
}

.cm-markdown-preview .md-h5 {
  font-size: 1em;
  color: #5a5a5a;
}

.cm-markdown-preview .md-h6 {
  font-size: 0.9em;
  color: #6a6a6a;
}

/* Bold and italic */
.cm-markdown-preview strong {
  font-weight: 700;
}

.cm-markdown-preview em {
  font-style: italic;
}

.cm-markdown-preview del {
  text-decoration: line-through;
  color: #868e96;
}

/* Inline code */
.cm-markdown-preview code {
  background-color: #f1f3f5;
  padding: 2px 6px;
  border-radius: 4px;
  font-family: 'SF Mono', Monaco, 'Cascadia Code', 'Consolas', monospace;
  font-size: 0.9em;
  color: #e83e8c;
}

/* Links */
.cm-markdown-preview a {
  color: #228be6;
  text-decoration: none;
}

.cm-markdown-preview a:hover {
  text-decoration: underline;
}

.cm-markdown-preview .md-wikilink {
  color: #228be6;
  text-decoration: underline;
  text-underline-offset: 2px;
  cursor: pointer;
}

/* Images */
.cm-markdown-preview img {
  max-width: 100%;
  height: auto;
  border-radius: 4px;
}

/* Blockquotes */
.cm-markdown-preview .md-blockquote {
  display: inline;
  color: #555;
  font-style: italic;
  border-left: 3px solid #ddd;
  padding-left: 12px;
  margin-left: 0;
}

/* List items */
.cm-markdown-preview .md-list-item {
  display: inline;
}

.cm-markdown-preview .md-list-marker {
  color: #888;
  margin-right: 4px;
}

/* Horizontal rule */
.cm-markdown-preview .md-hr,
.cm-markdown-preview hr {
  display: block;
  border: none;
  border-top: 2px solid #dee2e6;
  margin: 8px 0;
}

/* Checkboxes for task lists */
.cm-markdown-preview input[type='checkbox'] {
  margin-right: 6px;
  cursor: pointer;
}

/* Links should be clickable */
.cm-markdown-preview a {
  cursor: pointer;
}

/* Code block lines (raw markdown with background) */
.cm-code-block-line {
  background-color: #f8f9fa;
  font-family: 'SF Mono', Monaco, 'Cascadia Code', 'Consolas', monospace;
  font-size: 0.9em;
}

/* Make code block visually distinct */
.cm-code-block-line .cm-line {
  background-color: #f8f9fa;
}

/* Highlighted code in code blocks */
.cm-highlighted-code {
  font-family: 'SF Mono', Monaco, 'Cascadia Code', 'Consolas', monospace;
}

/* CodeMirror syntax highlighting classes */
.tok-keyword { color: #d73a49; }
.tok-operator { color: #d73a49; }
.tok-variableName { color: #24292e; }
.tok-function, .tok-definition { color: #6f42c1; }
.tok-string { color: #032f62; }
.tok-string2 { color: #032f62; }
.tok-number { color: #005cc5; }
.tok-bool { color: #005cc5; }
.tok-null { color: #005cc5; }
.tok-comment { color: #6a737d; font-style: italic; }
.tok-punctuation { color: #24292e; }
.tok-propertyName { color: #005cc5; }
.tok-typeName { color: #22863a; }
.tok-className { color: #6f42c1; }
.tok-tagName { color: #22863a; }
.tok-attributeName { color: #6f42c1; }
.tok-attributeValue { color: #032f62; }
.tok-regexp { color: #032f62; }
.tok-meta { color: #6a737d; }

/* Table preview container */
.cm-table-preview {
  display: block;
  margin: 0;
}

/* Table styling */
.md-table {
  border-collapse: collapse;
  border: 1px solid #d0d7de;
  border-radius: 6px;
  overflow: hidden;
}

.md-table th,
.md-table td {
  padding: 8px 12px;
  border: 1px solid #d0d7de;
  text-align: left;
}

.md-table th {
  background: #f6f8fa;
  font-weight: 600;
}

.md-table tbody tr:hover {
  background: #f6f8fa;
}

/* Legacy single-line table styles (for focused editing) */
.cm-markdown-preview .md-table-row {
  display: inline-flex;
  background: #fff;
  border: 1px solid #d0d7de;
  border-radius: 4px;
}

.cm-markdown-preview .md-table-cell {
  display: inline-block;
  padding: 6px 12px;
  min-width: 80px;
  border-right: 1px solid #d0d7de;
}

.cm-markdown-preview .md-table-cell:last-child {
  border-right: none;
}

.cm-markdown-preview .md-table-separator {
  display: none;
}

/* Smooth transition effect */
.cm-markdown-preview {
  transition: opacity 0.1s ease;
}

/* Math block preview */
.cm-math-preview {
  display: block;
  padding: 8px 0;
}

.cm-math-preview .katex-display {
  text-align: left !important;
  margin: 0 !important;
  justify-content: flex-start !important;
}

.cm-math-preview .katex-display > .katex {
  text-align: left !important;
}


/* Footnotes */
.footnote-ref .footnote-link {
  color: #228be6;
  cursor: pointer;
  font-size: 0.85em;
}

.footnote-def {
  display: inline;
  color: #666;
  font-size: 0.9em;
}

.footnote-def sup {
  color: #228be6;
  margin-right: 4px;
}

/* ==================== */
/* DARK MODE STYLES     */
/* ==================== */

/* Dark mode headers */
.dark-mode .cm-markdown-preview .md-h1 { color: #e0e0e0; }
.dark-mode .cm-markdown-preview .md-h2 { color: #d0d0d0; }
.dark-mode .cm-markdown-preview .md-h3 { color: #c0c0c0; }
.dark-mode .cm-markdown-preview .md-h4 { color: #b0b0b0; }
.dark-mode .cm-markdown-preview .md-h5 { color: #a0a0a0; }
.dark-mode .cm-markdown-preview .md-h6 { color: #909090; }

/* Dark mode text */
.dark-mode .cm-markdown-preview del { color: #777; }

/* Dark mode inline code */
.dark-mode .cm-markdown-preview code {
  background-color: #2d2d2d;
  color: #ce9178;
}

/* Dark mode blockquotes */
.dark-mode .cm-markdown-preview .md-blockquote {
  color: #aaa;
  border-left-color: #555;
}

/* Dark mode list markers */
.dark-mode .cm-markdown-preview .md-list-marker { color: #888; }

/* Dark mode horizontal rule */
.dark-mode .cm-markdown-preview .md-hr,
.dark-mode .cm-markdown-preview hr {
  border-top-color: #444;
}

/* Dark mode code block lines */
.dark-mode .cm-code-block-line {
  background-color: #2d2d2d;
}

.dark-mode .cm-code-block-line .cm-line {
  background-color: #2d2d2d;
}

/* Dark mode syntax highlighting */
.dark-mode .tok-keyword { color: #569cd6; }
.dark-mode .tok-operator { color: #d4d4d4; }
.dark-mode .tok-variableName { color: #9cdcfe; }
.dark-mode .tok-function, .dark-mode .tok-definition { color: #dcdcaa; }
.dark-mode .tok-string { color: #ce9178; }
.dark-mode .tok-string2 { color: #ce9178; }
.dark-mode .tok-number { color: #b5cea8; }
.dark-mode .tok-bool { color: #569cd6; }
.dark-mode .tok-null { color: #569cd6; }
.dark-mode .tok-comment { color: #6a9955; font-style: italic; }
.dark-mode .tok-punctuation { color: #d4d4d4; }
.dark-mode .tok-propertyName { color: #9cdcfe; }
.dark-mode .tok-typeName { color: #4ec9b0; }
.dark-mode .tok-className { color: #4ec9b0; }
.dark-mode .tok-tagName { color: #569cd6; }
.dark-mode .tok-attributeName { color: #9cdcfe; }
.dark-mode .tok-attributeValue { color: #ce9178; }
.dark-mode .tok-regexp { color: #d16969; }
.dark-mode .tok-meta { color: #6a9955; }

/* Dark mode tables */
.dark-mode .md-table {
  border-color: #444;
}

.dark-mode .md-table th,
.dark-mode .md-table td {
  border-color: #444;
}

.dark-mode .md-table th {
  background: #2d2d2d;
}

.dark-mode .md-table tbody tr:hover {
  background: #2d2d2d;
}

.dark-mode .cm-markdown-preview .md-table-row {
  background: #1e1e1e;
  border-color: #444;
}

.dark-mode .cm-markdown-preview .md-table-cell {
  border-right-color: #444;
}

/* Dark mode footnotes */
.dark-mode .footnote-def {
  color: #aaa;
}
