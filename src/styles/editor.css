.cm-editor {
  background: #fff;
}

.cm-editor.cm-focused {
  outline: none;
}

.cm-scroller {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
}

.cm-content {
  caret-color: #333;
  min-width: 100%;
}

.cm-line {
  padding: 2px 4px;
}

.cm-wikilink {
  text-decoration: underline;
  text-underline-offset: 2px;
  color: #228be6;
}

/* Code block lines - preview mode (gray background) */
.cm-code-block-line {
  background-color: #f6f8fa !important;
  border-left: 3px solid #e1e4e8;
  font-family: 'SF Mono', Monaco, 'Cascadia Code', 'Consolas', monospace;
  font-size: 0.9em;
}

/* Raw markdown lines styling - all lines not in preview mode (LIGHT MODE) */
/* Selected lines get DARK styling (inverted from light theme) */
.cm-selectedLine,
.cm-table-line,
.cm-math-block-line {
  background-color: #1e1e1e !important;
  color: #d4d4d4 !important;
  caret-color: #fff !important;
  border-radius: 4px;
  font-family: 'SF Mono', Monaco, 'Cascadia Code', 'Consolas', monospace;
  font-size: 0.95em;
}

/* Code block lines when block is focused - subtle highlight only */
.cm-code-block-line.cm-code-block-focused {
  background-color: #e8f4fc !important;
  border-left: 3px solid #228be6;
}

/* Only the CURRENT line in code block gets inverted */
.cm-selectedLine.cm-code-block-line {
  background-color: #1e1e1e !important;
  border-left: 3px solid #569cd6;
  color: #d4d4d4 !important;
  caret-color: #fff !important;
  border-radius: 0;
}

/* Light mode: current line in code block uses dark theme syntax colors */
.cm-selectedLine.cm-code-block-line .tok-keyword { color: #569cd6 !important; }
.cm-selectedLine.cm-code-block-line .tok-operator { color: #d4d4d4 !important; }
.cm-selectedLine.cm-code-block-line .tok-variableName { color: #9cdcfe !important; }
.cm-selectedLine.cm-code-block-line .tok-function,
.cm-selectedLine.cm-code-block-line .tok-definition { color: #dcdcaa !important; }
.cm-selectedLine.cm-code-block-line .tok-string,
.cm-selectedLine.cm-code-block-line .tok-string2 { color: #ce9178 !important; }
.cm-selectedLine.cm-code-block-line .tok-number { color: #b5cea8 !important; }
.cm-selectedLine.cm-code-block-line .tok-bool,
.cm-selectedLine.cm-code-block-line .tok-null { color: #569cd6 !important; }
.cm-selectedLine.cm-code-block-line .tok-comment { color: #6a9955 !important; }
.cm-selectedLine.cm-code-block-line .tok-punctuation { color: #d4d4d4 !important; }
.cm-selectedLine.cm-code-block-line .tok-propertyName { color: #9cdcfe !important; }
.cm-selectedLine.cm-code-block-line .tok-typeName,
.cm-selectedLine.cm-code-block-line .tok-className { color: #4ec9b0 !important; }
.cm-selectedLine.cm-code-block-line .tok-tagName { color: #569cd6 !important; }
.cm-selectedLine.cm-code-block-line .tok-attributeName { color: #9cdcfe !important; }
.cm-selectedLine.cm-code-block-line .tok-attributeValue { color: #ce9178 !important; }
.cm-selectedLine.cm-code-block-line .tok-regexp { color: #d16969 !important; }
.cm-selectedLine.cm-code-block-line .tok-meta { color: #6a9955 !important; }

/* Gutters (optional, hidden by default) */
.cm-gutters {
  background: #f8f9fa;
  border-right: 1px solid #dee2e6;
}

/* ==================== */
/* DARK MODE STYLES     */
/* ==================== */

.dark-mode .cm-editor {
  background: #1e1e1e;
}

.dark-mode .cm-content {
  caret-color: #fff;
  color: #d4d4d4;
}

/* Dark mode: code blocks */
.dark-mode .cm-code-block-line {
  background-color: #2d2d2d !important;
  border-left: 3px solid #444;
}

/* Dark mode: Selected lines get LIGHT styling (inverted from dark theme) */
.dark-mode .cm-selectedLine,
.dark-mode .cm-table-line,
.dark-mode .cm-math-block-line {
  background-color: #fff !important;
  color: #1e1e1e !important;
  caret-color: #333 !important;
}

/* Dark mode: Code block focused - subtle highlight */
.dark-mode .cm-code-block-line.cm-code-block-focused {
  background-color: #3a3d41 !important;
  border-left: 3px solid #569cd6;
}

/* Dark mode: Only the CURRENT line in code block gets inverted */
.dark-mode .cm-selectedLine.cm-code-block-line {
  background-color: #fff !important;
  border-left: 3px solid #228be6;
  color: #1e1e1e !important;
  caret-color: #333 !important;
}

/* Dark mode: current line in code block uses light theme syntax colors */
.dark-mode .cm-selectedLine.cm-code-block-line .tok-keyword { color: #d73a49 !important; }
.dark-mode .cm-selectedLine.cm-code-block-line .tok-operator { color: #d73a49 !important; }
.dark-mode .cm-selectedLine.cm-code-block-line .tok-variableName { color: #24292e !important; }
.dark-mode .cm-selectedLine.cm-code-block-line .tok-function,
.dark-mode .cm-selectedLine.cm-code-block-line .tok-definition { color: #6f42c1 !important; }
.dark-mode .cm-selectedLine.cm-code-block-line .tok-string,
.dark-mode .cm-selectedLine.cm-code-block-line .tok-string2 { color: #032f62 !important; }
.dark-mode .cm-selectedLine.cm-code-block-line .tok-number { color: #005cc5 !important; }
.dark-mode .cm-selectedLine.cm-code-block-line .tok-bool,
.dark-mode .cm-selectedLine.cm-code-block-line .tok-null { color: #005cc5 !important; }
.dark-mode .cm-selectedLine.cm-code-block-line .tok-comment { color: #6a737d !important; }
.dark-mode .cm-selectedLine.cm-code-block-line .tok-punctuation { color: #24292e !important; }
.dark-mode .cm-selectedLine.cm-code-block-line .tok-propertyName { color: #005cc5 !important; }
.dark-mode .cm-selectedLine.cm-code-block-line .tok-typeName,
.dark-mode .cm-selectedLine.cm-code-block-line .tok-className { color: #22863a !important; }
.dark-mode .cm-selectedLine.cm-code-block-line .tok-tagName { color: #22863a !important; }
.dark-mode .cm-selectedLine.cm-code-block-line .tok-attributeName { color: #6f42c1 !important; }
.dark-mode .cm-selectedLine.cm-code-block-line .tok-attributeValue { color: #032f62 !important; }
.dark-mode .cm-selectedLine.cm-code-block-line .tok-regexp { color: #032f62 !important; }
.dark-mode .cm-selectedLine.cm-code-block-line .tok-meta { color: #6a737d !important; }

/* Dark mode gutters */
.dark-mode .cm-gutters {
  background: #252526;
  border-right: 1px solid #3c3c3c;
}

/* ==================== */
/* RAW MODE STYLES      */
/* ==================== */

/* Raw mode: always use monospace font everywhere */
.raw-mode .cm-scroller,
.raw-mode .cm-content,
.raw-mode .cm-line {
  font-family: 'SF Mono', Monaco, 'Cascadia Code', 'Consolas', monospace !important;
}

/* Raw mode: no inversion on selected lines - just subtle highlight */
.raw-mode .cm-selectedLine,
.raw-mode .cm-selectedLine.cm-code-block-line {
  background-color: rgba(0, 0, 0, 0.05) !important;
  color: inherit !important;
  caret-color: #333 !important;
  filter: none !important;
  border-radius: 0;
  font-size: inherit !important;
}

/* Raw mode dark: subtle highlight */
.raw-mode.dark-mode .cm-selectedLine,
.raw-mode.dark-mode .cm-selectedLine.cm-code-block-line {
  background-color: rgba(255, 255, 255, 0.1) !important;
  color: inherit !important;
  caret-color: #fff !important;
}
